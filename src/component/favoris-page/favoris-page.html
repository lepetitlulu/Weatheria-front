<app-header></app-header>
<div class="p-6">
  <h2 class="text-2xl font-bold mb-4">Vos villes favorites</h2>

  @if (loading) {
  <div>Chargement...</div>
  }

  @if (error) {
  <div class="text-red-500">{{ error }}</div>
  }

  @if (favorites.length > 0) {
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    @for (fav of favorites; track fav.cityName) {
    <div class="bg-white rounded-xl shadow-lg p-4 flex flex-col justify-between">
      <div class="flex justify-between items-center mb-3">
        <span class="text-lg font-bold text-blue-600">
          ğŸ“ {{ fav.cityName }}
        </span>
        <button (click)="removeFavorite(fav.cityName)" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">
          Supprimer
        </button>
      </div>

      @if (fav.meteo) {
      <div class="text-center">
        <div class="text-3xl font-bold text-gray-800">
          ğŸŒ¡ {{ fav.meteo.main?.temp }}Â°C
        </div>
        <div class="text-gray-600">
          Ressenti : {{ fav.meteo.main?.feels_like }}Â°C
        </div>

        <div class="mt-2 text-gray-700">
          @for (w of fav.meteo.weather; track w) {
          <div class="italic capitalize">â˜ï¸ {{ w.description }}</div>
          }
        </div>
      </div>
      } @else {
      <div class="text-gray-400 italic">MÃ©tÃ©o en cours de chargement...</div>
      }
    </div>
    }
  </div>
  }

  @if (!loading && favorites.length === 0) {
  <div class="text-gray-500">
    Vous n'avez encore aucune ville en favoris.
  </div>
  }
</div>