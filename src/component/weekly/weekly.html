<div class="w-full max-w-3xl mt-6">
  <h2 class="text-xl font-bold text-white text-center mb-4">
     Prévisions sur 5 jours
  </h2>

  @if (loading) {
    <p class="text-center text-gray-200">Chargement...</p>
  } @else if (error) {
    <p class="text-center text-red-400">{{ error }}</p>
  } @else {
    <div class="space-y-6">
      @for (day of dayKeys; track day) {
        <section class="bg-white/90 backdrop-blur-md p-6 rounded-xl shadow-lg">
          <h3 class="text-lg font-semibold text-blue-700 mb-4 capitalize">
            {{ day }}
          </h3>

          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
            @for (entry of groupedData[day]; track entry.dt) {
              <article class="flex flex-col items-center p-4 bg-blue-50 rounded-lg shadow-inner">
                <span class="font-medium text-gray-800">
                  {{ formatHour(entry.dt) }}
                </span>

                <div class="flex items-center gap-2 mt-1">
                  <img
                    class="w-10 h-10"
                    [src]="'https://openweathermap.org/img/wn/' + (entry.weather?.[0]?.icon || '01d') + '@2x.png'"
                    [alt]="entry.weather?.[0]?.description || 'weather icon'"
                  />
                  <span class="text-2xl font-bold text-blue-600">
                    {{ entry.main.temp | number:'1.0-0' }}°C
                  </span>
                </div>

                <span class="italic text-gray-600 capitalize mt-1">
                  {{ entry.weather?.[0]?.description }}
                </span>

                <div class="flex gap-3 mt-3">
                  <div class="flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow">
                    <span class="text-gray-800 text-sm">
                      {{ entry.main.humidity }} %
                    </span>
                  </div>
                  <div class="flex items-center space-x-2 bg-white px-3 py-1 rounded-full shadow">
                    <span class="text-gray-800 text-sm">
                      {{ getWindSpeedKmH(entry.wind?.speed || 0) }} km/h
                    </span>
                  </div>
                </div>
              </article>
            }
          </div>
        </section>
      }
    </div>
  }
</div>
